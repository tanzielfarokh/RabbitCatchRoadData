性能提升和一些小错误修复